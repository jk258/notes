import{_ as n,o as a,c as i,a2 as e}from"./chunks/framework.DaWjvruP.js";const o=JSON.parse('{"title":"nginx 配置","description":"","frontmatter":{},"headers":[{"level":2,"title":"命令行","slug":"命令行","link":"#命令行","children":[]},{"level":2,"title":"启动 web 服务（以 vue 为例）","slug":"启动-web-服务-以-vue-为例","link":"#启动-web-服务-以-vue-为例","children":[]},{"level":2,"title":"PC 端和移动端使用不同的项目文件映射","slug":"pc-端和移动端使用不同的项目文件映射","link":"#pc-端和移动端使用不同的项目文件映射","children":[]},{"level":2,"title":"配置代理","slug":"配置代理","link":"#配置代理","children":[]},{"level":2,"title":"linux安装nginx","slug":"linux安装nginx","link":"#linux安装nginx","children":[{"level":3,"title":"依赖下载","slug":"依赖下载","link":"#依赖下载","children":[]},{"level":3,"title":"下载nginx","slug":"下载nginx","link":"#下载nginx","children":[]}]}],"relativePath":"前端/1-工具/nginx.md","filePath":"前端/1-工具/nginx.md"}'),p={name:"前端/1-工具/nginx.md"};function l(r,s,t,h,c,d){return a(),i("div",null,s[0]||(s[0]=[e(`<h1 id="nginx-配置" tabindex="-1">nginx 配置 <a class="header-anchor" href="#nginx-配置" aria-label="Permalink to &quot;nginx 配置&quot;">​</a></h1><h2 id="命令行" tabindex="-1">命令行 <a class="header-anchor" href="#命令行" aria-label="Permalink to &quot;命令行&quot;">​</a></h2><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> //启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> reload</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> //重启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> //停止</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="启动-web-服务-以-vue-为例" tabindex="-1">启动 web 服务（以 vue 为例） <a class="header-anchor" href="#启动-web-服务-以-vue-为例" aria-label="Permalink to &quot;启动 web 服务（以 vue 为例）&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>server {</span></span>
<span class="line"><span>  listen 3000;</span></span>
<span class="line"><span>  server_name _;</span></span>
<span class="line"><span>  # 禁止 iframe 嵌套</span></span>
<span class="line"><span>  # add_header        X-Frame-Options SAMEORIGIN;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  location /{</span></span>
<span class="line"><span>    # 项目目录</span></span>
<span class="line"><span>    root html/dist;</span></span>
<span class="line"><span>    # 默认读取文件</span></span>
<span class="line"><span>    index index.html;</span></span>
<span class="line"><span>    # 配置 history 模式的刷新空白</span></span>
<span class="line"><span>    try_files       $uri $uri/ /index.html;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  # 后缀匹配，解决静态资源找不到问题</span></span>
<span class="line"><span>  # location ~* \\.(gif|jpg|jpeg|png|css|js|ico)$ {</span></span>
<span class="line"><span>  #   root           html/dist/assets/;</span></span>
<span class="line"><span>  # }</span></span>
<span class="line"><span>  # 图片防盗链</span></span>
<span class="line"><span>  location ~/assets/.*\\.(jpg|jpeg|png|gif|webp)$ {</span></span>
<span class="line"><span>    root              html/dist;</span></span>
<span class="line"><span>    valid_referers none blocked 127.0.0.1;</span></span>
<span class="line"><span>    if ($invalid_referer) {</span></span>
<span class="line"><span>      # return          403; # 返回状态码</span></span>
<span class="line"><span>      rewrite ^/ /assets/logo-277e0e97.svg  break;# 重写路径返回其他图片</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span></span></span>
<span class="line"><span>  # 访问限制</span></span>
<span class="line"><span>  # location /assets {</span></span>
<span class="line"><span>  #   root               html/dist;</span></span>
<span class="line"><span>  #   # allow 允许</span></span>
<span class="line"><span>  #   allow              127.0.0.1;</span></span>
<span class="line"><span>  #   # deny  拒绝</span></span>
<span class="line"><span>  #   deny               all;</span></span>
<span class="line"><span>  # }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="pc-端和移动端使用不同的项目文件映射" tabindex="-1">PC 端和移动端使用不同的项目文件映射 <a class="header-anchor" href="#pc-端和移动端使用不同的项目文件映射" aria-label="Permalink to &quot;PC 端和移动端使用不同的项目文件映射&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>server {</span></span>
<span class="line"><span>  listen 3001;</span></span>
<span class="line"><span>  server_name _;</span></span>
<span class="line"><span>  location /{</span></span>
<span class="line"><span>    root html/pc;</span></span>
<span class="line"><span>    if ($http_user_agent ~* &#39;(mobile|android|iphone|ipad|phone)&#39;) {</span></span>
<span class="line"><span>      root html/mobile;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>    index index.html;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="配置代理" tabindex="-1">配置代理 <a class="header-anchor" href="#配置代理" aria-label="Permalink to &quot;配置代理&quot;">​</a></h2><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>server {</span></span>
<span class="line"><span>  listen 9000;</span></span>
<span class="line"><span>  server_name _;</span></span>
<span class="line"><span>  location /api/{# 代理接口</span></span>
<span class="line"><span>    add_header Access-Control-Allow-Origin * always;</span></span>
<span class="line"><span>    add_header Access-Control-Allow-Headers *;</span></span>
<span class="line"><span>    add_header Access-Control-Allow-Methods &quot;GET, POST, PUT, OPTIONS&quot;;</span></span>
<span class="line"><span>    </span></span>
<span class="line"><span>    proxy_pass http://127.0.0.1:3001/api/;</span></span>
<span class="line"><span>    proxy_http_version 1.1;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>  location /h5{# 代理页面</span></span>
<span class="line"><span>    proxy_pass http://127.0.0.1:8080/;</span></span>
<span class="line"><span>    proxy_http_version 1.1;</span></span>
<span class="line"><span>  }</span></span>
<span class="line"><span>}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="linux安装nginx" tabindex="-1">linux安装nginx <a class="header-anchor" href="#linux安装nginx" aria-label="Permalink to &quot;linux安装nginx&quot;">​</a></h2><h3 id="依赖下载" tabindex="-1">依赖下载 <a class="header-anchor" href="#依赖下载" aria-label="Permalink to &quot;依赖下载&quot;">​</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc-c++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pcre</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pcre-devel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zlib-devel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssl-devel</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="下载nginx" tabindex="-1">下载nginx <a class="header-anchor" href="#下载nginx" aria-label="Permalink to &quot;下载nginx&quot;">​</a></h3><ol><li><p>访问<a href="http://nginx.org/en/download.html" target="_blank" rel="noreferrer">官网</a>,鼠标放在需要下载的版本上，右击鼠标“复制链接”</p></li><li><p>在Linux系统上进行下载（示例：下载1.25.1版本）</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://nginx.org/download/nginx-1.25.1.tar.gz</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>便于管理，可以创建一个文件夹来保存</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建文件夹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/java</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#将包移入文件夹中</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-1.25.1.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/java</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#转换到该文件夹下</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/java</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#查看文件夹的内容</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ls</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li><li><p>解压包，并转换到nginx文件夹下,出现“nginx-1.25.1”表示解压成功</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#解压包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zxf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-1.25.1.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#转换到nginx文件夹下</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-1.25.1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>配置nginx</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>编译安装nginx</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#这是编译和安装一块进行（&amp;&amp;），也可以分开</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&amp;&amp;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>配置环境变量,把nginx的sbin路径放进去就行了</p><p>在<code>/etc/profile</code>,增加nginx的环境变量</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#Nginx enviroment</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NGINX_PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/usr/local/nginx</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> PATH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$PATH:\${JAVA_HOME}/bin:$PATH:\${NGINX_PATH}/sbin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可以通过<code>whereis nginx</code>来获得nginx的安装目录</p><p>刷新配置文件，让配置生效</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/profile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>测试是否成功</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">nginx</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol>`,14)]))}const u=n(p,[["render",l]]);export{o as __pageData,u as default};
